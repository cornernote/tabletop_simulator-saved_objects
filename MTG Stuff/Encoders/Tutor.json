{
  "SaveName": "",
  "Date": "",
  "VersionNumber": "",
  "GameMode": "",
  "GameType": "",
  "GameComplexity": "",
  "Tags": [],
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Table": "",
  "Sky": "",
  "Note": "",
  "TabStates": {},
  "LuaScript": "",
  "LuaScriptState": "",
  "XmlUI": "",
  "ObjectStates": [
    {
      "GUID": "9106c4",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -23.7350941,
        "posY": 1.01000011,
        "posZ": -1.88999867,
        "rotX": -3.518228E-07,
        "rotY": 179.995071,
        "rotZ": 7.4096256E-06,
        "scaleX": 0.4068285,
        "scaleY": 1.0,
        "scaleZ": 0.4068285
      },
      "Nickname": "Tutor",
      "Description": "",
      "GMNotes": "",
      "AltLookAngle": {
        "x": 0.0,
        "y": 0.0,
        "z": 0.0
      },
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://c1.scryfall.com/file/scryfall-cards/art_crop/front/3/b/3bdbc231-5316-4abd-9d8d-d87cff2c9847.jpg",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 5.0,
          "StandUp": false,
          "Stackable": false
        }
      },
      "LuaScript": "function onLoad(saved_data)\r\n\tsearchTerm = ''\r\n\tdeckDir=-1\r\n\tif saved_data ~= \"\" then\r\n\t\tlocal loaded_data = JSON.decode(saved_data)\r\n\t\tsearchTerm = loaded_data[1]\r\n\t\tdeckDir = loaded_data[2]\r\n\tend\r\n\tif deckDir==1 then\r\n\t\tlab='→'\r\n\t\ttip='card extraction: [b]right[/b]'\r\n\telse\r\n\t\tlab='←'\r\n\t\ttip='card extraction: [b]left[/b]'\r\n\tend\r\n\tself.createButton({\r\n\t\tlabel=lab,\r\n\t\ttooltip=tip,\r\n\t\tclick_function=\"changeDeckDir\",\r\n\t\tfunction_owner=self,\r\n\t\tposition={-1.6,0.1,-1.3},\r\n\t\theight=200,\r\n\t\twidth=400,\r\n\t\tfont_size=500,\r\n\t\tfont_color={1,1,1,90},\r\n\t\tcolor={0,0,0,0},\r\n\t})\r\n\tself.createInput({\r\n\t\tinput_function='getSearch',\r\n\t\tfunction_owner=self,\r\n\t\tlabel='enter search',\r\n\t\tvalue=searchTerm,\r\n\t\tposition={0,0.1,0},\r\n\t\twidth=1900,\r\n\t\theight=321,\r\n\t\tfont_size=300,\r\n\t\tfont_color={1,1,1,1/0.75},\r\n\t\tcolor={0,0,0,0.75},\r\n\t\ttooltip='enter search-term here',\r\n\t\talignment=3\r\n\t})\r\nend\r\nfunction getSearch(obj,ply,val)\r\n\tsearchTerm=val\r\n\tupdateSave()\r\nend\r\nfunction changeDeckDir()\r\n\tdeckDir=deckDir*-1\r\n\tif deckDir==1 then\r\n\t\tlab='→'\r\n\t\ttip='card extraction: [b]right[/b]'\r\n\telse\r\n\t\tlab='←'\r\n\t\ttip='card extraction: [b]left[/b]'\r\n\tend\r\n\tself.editButton({index=0,label=lab,tooltip=tip})\r\n  updateSave()\r\nend\r\nfunction updateSave()\r\n  local data_to_save = {searchTerm,deckDir}\r\n  saved_data = JSON.encode(data_to_save)\r\n  self.script_state = saved_data\r\nend\r\n\r\nfunction onCollisionEnter(co)\r\n\tnowt=os.time()\r\n\tif prevt==nil then prevt=0 end\r\n\tif nowt-prevt<1 then return end\r\n\tprevt=nowt\r\n\tdeck = co.collision_object\r\n\tif deck.type == \"Deck\" then\r\n    nTake=1\r\n    nTaken=0\r\n    for i,card in ipairs(deck.getObjects()) do\r\n      cname=card.name:lower():gsub('%p','')\r\n      if cname:match(searchTerm) then\r\n        nTaken=nTaken+1\r\n        rot=deck.getRotation()\r\n        pos=deck.getPosition()\r\n        rig=deck.getTransformRight()\r\n        rot[3]=0\r\n        pos=pos+rig:scale(deckDir*2.4+deckDir*(nTaken-1)*1.5)\r\n        pos[2]=pos[2]+nTaken*0.1\r\n        deck.takeObject({index=i-nTaken,position=pos,rotation=rot})\r\n        if nTaken==tonumber(nTake) then\r\n          break\r\n        end\r\n      end\r\n    end\r\n    Wait.time(function() deck.shuffle() end, 0.1, 5)\r\n\r\n    self.destruct()\r\n\tend\r\nend",
      "LuaScriptState": "[\"\",-1]",
      "XmlUI": ""
    }
  ]
}